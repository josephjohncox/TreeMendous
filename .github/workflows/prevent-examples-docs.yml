name: Prevent Examples and Docs in Main Repo

on:
  pull_request:
    paths:
      - 'examples/**'
      - 'docs/**'
  push:
    branches: [main]
    paths:
      - 'examples/**'
      - 'docs/**'

jobs:
  check-structure:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Check for examples or docs directories
        run: |
          if [[ -d "examples" && ! -L "examples" ]]; then
            echo "âŒ Error: examples/ directory found in main repo"
            echo "Examples should be in: https://github.com/josephjohncox/tree-mendous-examples"
            echo ""
            echo "To fix this:"
            echo "1. Move content to tree-mendous-examples repo"
            echo "2. Remove examples/ directory from this PR"
            echo "3. Use ./scripts/setup-dev-links.sh for development"
            exit 1
          fi
          
          if [[ -d "docs" && ! -L "docs" ]]; then
            echo "âŒ Error: docs/ directory found in main repo"
            echo "Docs should be in: https://github.com/josephjohncox/tree-mendous-docs"
            echo ""
            echo "To fix this:"
            echo "1. Move content to tree-mendous-docs repo"
            echo "2. Remove docs/ directory from this PR"
            echo "3. Use ./scripts/setup-dev-links.sh for development"
            exit 1
          fi
          
          echo "âœ… Repository structure is correct"
          
      - name: Provide guidance
        if: failure()
        run: |
          echo ""
          echo "ğŸ“š Repository Structure Guide:"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo ""
          echo "Tree-Mendous main repo should contain:"
          echo "  âœ… treemendous/     (core library)"
          echo "  âœ… tests/           (tests)"
          echo "  âœ… scripts/         (utility scripts)"
          echo "  âœ… .github/         (CI/CD)"
          echo "  âœ… pyproject.toml   (package config)"
          echo ""
          echo "Separate repositories:"
          echo "  ğŸ“Š tree-mendous-examples  (Jupyter notebooks, demos)"
          echo "  ğŸ“š tree-mendous-docs      (documentation, guides)"
          echo ""
          echo "For development setup:"
          echo "  ./scripts/setup-dev-links.sh"
          echo ""
          echo "This creates symlinks for unified development while maintaining"
          echo "clean separation in the main repository."
